/**
 * @license sc-angular v0.9.0
 * (c) 2016 Sebis
 * License: Sebis Proprietary
 * https://bitbucket.org/sebischair/sc-angular
 */
!function(){angular.module("sociocortex",["ngStorage","ngResource"]);var a="https://server.sociocortex.com";angular.module("sociocortex").value("scConnection",{baseUri:a,apiVersion:"v1",authenticationMethod:"basic"}),angular.module("sociocortex").config(["$sceDelegateProvider",function(b){b.resourceUrlWhitelist(["self",a+"/api/**"])}])}(),function(){function a(a,b){return window.btoa(""+a+":"+b)}function b(a,b,c){a.scStore&&a.scStore.token?(c.headers["Access-Control-Allow-Headers"]="jwt","basic"===b.authenticationMethod&&"basic"===a.scStore.type?c.headers.common.Authorization="Basic "+a.scStore.token:"jwt"===b.authenticationMethod&&"jwt"===a.scStore.type&&(c.headers.common.Authorization="Bearer "+a.scStore.token)):(delete a.scStore,delete c.headers.common.Authorization)}angular.module("sociocortex").service("scAuth",["$localStorage","$q","$http","scUtil","scConnection",function(c,d,e,f,g){function h(){return c.scStore.user}function i(a,b,c,d){return g.authenticationMethod&&"basic"!==g.authenticationMethod.toLowerCase()?"jwt"===g.authenticationMethod.toLowerCase()?k(a,b,c,d):void 0:j(a,b,c,d)}function j(b,e,f,g){c.scStore={token:a(b,e),type:"basic"},o();var h=d.defer();return l().then(function(a){c.scStore.user={id:a.data.id,name:a.data.name,href:a.data.href},a=f&&angular.isFunction(f)?f(a.data):a.data,h.resolve(a)},function(a){delete c.scStore,g&&angular.isFunction(g)&&(a=g(a)),h.reject(a)}),h.promise}function k(b,g,h,i){var j=d.defer();return c.scStore={type:"jwt"},e({headers:{Authorization:"Basic "+a(b,g)},url:f.getFullUrl(f.paths.jwt),method:"GET"}).then(function(a){c.scStore.token=a.data.token,c.scStore.user={id:a.data.payload.sub,name:a.data.payload.name,href:f.generateHref(f.paths.users,a.data.payload.sub)},o(),a=h&&angular.isFunction(h)?h(c.scStore.user):c.scStore.user,j.resolve(a)},function(a){delete c.scStore,i&&angular.isFunction(i)&&(a=i(a)),j.reject(a)}),j.promise}function l(){return d(function(a,b){e({url:f.getFullUrl(f.paths.usersMe),method:"GET"}).then(a,b)})}function m(){delete c.scStore,o()}function n(){return!!c.scStore}function o(){b(c,g,e.defaults)}return{getUser:h,login:i,logout:m,isAuthenticated:n}}]),angular.module("sociocortex").run(function(a,c,d){function e(a,b){return a=angular.isArray(a)?a:[a],a.concat(b)}function f(){b(d,c,a.defaults)}f(),a.defaults.transformResponse=e(a.defaults.transformResponse,function(a,b,e){var g=b(),h=g.jwt;return h&&"jwt"===c.authenticationMethod&&(d.scStore.token=h,f()),a})})}(),function(){angular.module("sociocortex").service("scData",["$resource","scUtil","scAuth",function(a,b,c){var d=a(b.getFullUrl(b.paths.entities+"/:id"),{id:"@id"},{update:{method:"PUT"},queryByEntityType:{method:"GET",url:b.getFullUrl(b.paths.entityTypes+"/:id/"+b.paths.entities),isArray:!0},queryByWorkspace:{method:"GET",url:b.getFullUrl(b.paths.workspaces+"/:id/"+b.paths.entities),isArray:!0},getAttributes:{method:"GET",url:b.getFullUrl(b.paths.entities+"/:id/"+b.paths.attributes),isArray:!0},getFiles:{method:"GET",url:b.getFullUrl(b.paths.entities+"/:id/"+b.paths.files),isArray:!0}});d.objectifyAttributes=function(a){function b(a){if(a.attributes||(a.attributes={}),angular.isArray(a.attributes)){var b={};angular.forEach(a.attributes,function(a){b[a.name]=1===a.values.length?a.values[0]:a.values}),a.attributes=b}if(a.derivedAttributes||(a.derivedAttributes={}),angular.isArray(a.derivedAttributes)){var b={};angular.forEach(a.derivedAttributes,function(a){b[a.name]=1===a.values.length?a.values[0]:a.values}),a.derivedAttributes=b}return a}if(angular.isArray(a)){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c}return b(a)},d.arrayifyAttributes=function(a){function b(a){if(a.attributes||(a.attributes=[]),angular.isObject(a.attributes)){var b=[];angular.forEach(a.attributes,function(a,c){angular.isUndefined(a)||null==a?b.push({name:c,values:[]}):angular.isArray(a)?b.push({name:c,values:a}):b.push({name:c,values:[a]})}),a.attributes=b}if(a.derivedAttributes||(a.derivedAttributes=[]),angular.isObject(a.derivedAttributes)){var b=[];angular.forEach(a.derivedAttributes,function(a,c){angular.isUndefined(a)||null==a?b.push({name:c,values:[]}):angular.isArray(a)?b.push({name:c,values:a}):b.push({name:c,values:[a]})}),a.derivedAttributes=b}return a}if(angular.isArray(a)){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c}return b(a)},delete d.query;var e=a(b.getFullUrl(b.paths.workspaces+"/:id"),{id:"@id"},{update:{method:"PUT"},getEntities:{method:"GET",url:b.getFullUrl(b.paths.workspaces+"/:id/"+b.paths.entities),isArray:!0},getEntityTypes:{method:"GET",url:b.getFullUrl(b.paths.workspaces+"/:id/"+b.paths.entityTypes),isArray:!0}}),f=a(b.getFullUrl(b.paths.attributes+"/:id"),{id:"@id"},{update:{method:"PUT"},queryByEntity:{method:"GET",url:b.getFullUrl(b.paths.entities+"/:id/"+b.paths.attributes),isArray:!0},getValues:{method:"GET",url:b.getFullUrl(b.paths.attributes+"/:id/"+b.paths.attributeValues),isArray:!0},addValue:{method:"POST",url:b.getFullUrl(b.paths.attributes+"/:id/"+b.paths.attributeValues)},getValue:{method:"GET",url:b.getFullUrl(b.paths.attributes+"/:id/"+b.paths.attributeValues+"/:index")},updateValue:{method:"PUT",url:b.getFullUrl(b.paths.attributes+"/:id/"+b.paths.attributeValues+"/:index")},deleteValue:{method:"DELETE",url:b.getFullUrl(b.paths.attributes+"/:id/"+b.paths.attributeValues+"/:index")},deleteValues:{method:"DELETE",url:b.getFullUrl(b.paths.attributes+"/:id/"+b.paths.attributeValues)}});delete f.query;var g=a(b.getFullUrl(b.paths.files+"/:id"),{id:"@id"},{update:{method:"PUT"},queryByEntity:{method:"GET",url:b.getFullUrl(b.paths.entities+"/:id/"+b.paths.files),isArray:!0},download:{method:"GET",url:b.getFullUrl(b.paths.files+"/:id/content")}});delete g.query;var h=a(b.getFullUrl(b.paths.tasks+"/:id"),{id:"@id"},{update:{method:"PUT"},getAttributes:{method:"GET",url:b.getFullUrl(b.paths.tasks+"/:id/"+b.paths.attributes),isArray:!0}}),i=a(b.getFullUrl(b.paths.expertises+"/:id"),{id:"@id"},{update:{method:"PUT"}}),j=a(b.getFullUrl(b.paths.events)),k=a(b.getFullUrl(b.paths.changesets+"/:id"),{id:"@id"},{postComment:{method:"POST",url:b.getFullUrl(b.paths.changesets+"/:id/"+b.paths.comments)},getComments:{method:"GET",url:b.getFullUrl(b.paths.changesets+"/:id/"+b.paths.comments),isArray:!0},like:{method:"POST",url:b.getFullUrl(b.paths.changesets+"/:id/"+b.paths.like)},unlike:{method:"DELETE",url:b.getFullUrl(b.paths.changesets+"/:id/"+b.paths.like)}}),l=a(b.getFullUrl(b.paths.comments+"/:id"),{id:"@id"},{"delete":{method:"DELETE"},put:{method:"PUT"}});return{Entity:d,File:g,Workspace:e,Attribute:f,Task:h,Expertise:i,Event:j,ChangeSet:k,Comment:l}}])}(),function(){angular.module("sociocortex").service("scModel",["$resource","scUtil","scAuth",function(a,b,c){var d=a(b.getFullUrl(b.paths.entityTypes+"/:id"),{id:"@id"},{update:{method:"PUT"},queryByWorkspace:{method:"GET",url:b.getFullUrl(b.paths.workspaces+"/:id/"+b.paths.entityTypes),isArray:!0},getAttributeDefinitions:{method:"GET",url:b.getFullUrl(b.paths.entityTypes+"/:id/"+b.paths.attributeDefinitions),isArray:!0},getEntities:{method:"GET",url:b.getFullUrl(b.paths.entityTypes+"/:id/"+b.paths.entities),isArray:!0}});delete d.query;var e=a(b.getFullUrl(b.paths.attributeDefinitions+"/:id"),{id:"@id"},{update:{method:"PUT"},queryByEntityType:{method:"GET",url:b.getFullUrl(b.paths.entityTypes+"/:id/"+b.paths.attributeDefinitions),isArray:!0}});delete e.query;var f=a(b.getFullUrl(b.paths.derivedAttributeDefinitions+"/:id"),{id:"@id"},{update:{method:"PUT"},queryByEntityType:{method:"GET",url:b.getFullUrl(b.paths.entityTypes+"/:id/"+b.paths.derivedAttributeDefinitions),isArray:!0}});delete f.query;var g=a(b.getFullUrl(b.paths.customFunctions+"/:id"),{id:"@id"},{update:{method:"PUT"},queryByEntityType:{method:"GET",url:b.getFullUrl(b.paths.entityTypes+"/:id/"+b.paths.customFunctions),isArray:!0},queryByWorkspace:{method:"GET",url:b.getFullUrl(b.paths.workspaces+"/:id/"+b.paths.customFunctions),isArray:!0}}),h=a(b.getFullUrl(b.paths.taskDefinitions+"/:id"),{id:"@id"},{update:{method:"PUT"}});return{EntityType:d,AttributeDefinition:e,DerivedAttributeDefinition:f,CustomFunction:g,TaskDefinition:h}}])}(),function(){angular.module("sociocortex").service("scMxl",["$cacheFactory","$q","$http","scAuth","scUtil",function(a,b,c,d,e){function f(a,c,d,e){var f,g,h,k;angular.isObject(a)?(f=a,angular.isString(c)?(g=c,h=d,k=e):(h=c,k=d)):angular.isString(a)?(restriciton=a,h=c,k=d):(h=a,k=c);var l="hints";f&&(l+="#"+JSON.stringify(f)),g&&(l+="#"+g);var m=j.get(l),n=b.defer();return m?(n.resolve(m),n.promise):(i({httpMethod:"GET",context:f,mxlMethod:"mxlAutoCompletionHints",params:{restrict:g}},function(a){j.put(l,a),h&&angular.isFunction(h)&&(a=h(a)),n.resolve(a)},function(a){k&&angular.isFunction(k)&&(a=k(a)),n.reject(a)}),n.promise)}function g(a,c,d,e){var f,g,h,j;angular.isObject(c)?(f=a,g=c,h=d,j=e):angular.isObject(a)?(g=a,h=c,j=d):(h=a,j=c);var k=b.defer();return i({httpMethod:"POST",context:f,mxlMethod:"mxlQuery",data:g},function(a){h&&angular.isFunction(h)&&(a=h(a)),k.resolve(a)},function(a){j&&angular.isFunction(j)&&(a=j(a)),k.reject(a)}),k.promise}function h(a,c,d,e){var f,g,h,j;angular.isObject(c)?(f=a,g=c,h=d,j=e):angular.isObject(a)?(g=a,h=c,j=d):(h=a,j=c);var k=b.defer();return i({httpMethod:"POST",context:f,mxlMethod:"mxlValidation",data:g},function(a){h&&angular.isFunction(h)&&(a=h(a)),k.resolve(a)},function(a){j&&angular.isFunction(j)&&(a=j(a)),k.reject(a)}),k.promise}function i(a,b,d){var f="";return a.context&&(a.context.entity?f=e.paths.entities+"/"+a.context.entity.id+"/":a.context.entityType?f=e.paths.entityTypes+"/"+a.context.entityType.id+"/":a.context.workspace&&(f=e.paths.workspaces+"/"+a.context.workspace.id+"/")),f=e.getFullUrl(f+a.mxlMethod),c({method:a.httpMethod,url:f,data:a.data,params:a.params}).then(function(a){return b(a.data)},function(a){return d?d(a.data):void 0})}var j=a("mxlAutoCompleteCache");return{autoComplete:f,query:g,validate:h}}])}(),function(){angular.module("sociocortex").service("scPrincipal",["$resource","scUtil","scAuth",function(a,b,c){var d=a(b.getFullUrl(b.paths.users+"/:id"),{id:"@id"},{update:{method:"PUT"},picture:{method:"GET",url:b.getFullUrl(b.paths.users+"/:id/picture")},me:{method:"GET",url:b.getFullUrl(b.paths.usersMe)},myPicture:{method:"GET",url:b.getFullUrl(b.paths.usersMe+"/picture")}});d.getPictureUrl=function(a){return angular.isString(a)?b.getFullUrl(b.paths.users+"/"+a+"/picture"):angular.isObject(a)&&a.id?b.getFullUrl(b.paths.users+"/"+a.id+"/picture"):null};var e=a(b.getFullUrl(b.paths.groups+"/:id"),{id:"@id"},{update:{method:"PUT"}});return{User:d,Group:e}}])}(),function(){function a(a){function b(a){return function(b){return angular.isObject(b)&&b.href&&b.href.indexOf("/"+a+"/")>0}}function c(b,c){return"/"===b.charAt(b.length-1)&&(b=b.substr(0,b.length-1)),"/"===c.charAt(0)&&(c=c.substr(1,a.baseUri.length-1)),b+"/"+c}function d(a,b){return g(a+"/"+b)}function e(a){if(f(a))a=a.href;else if(!angular.isString(a))throw new TypeError("The parameter must be a of type 'link object' or 'string'");var b=g("");if(0!==a.indexOf(b))throw new Error('The given URL does not start with the proper prefix of "'+b+"'");return a.substr(b.length-1)}function f(a){return angular.isObject(a)&&!!a.id&&!!a.href&&!!a.name}function g(b){return c(c(a.baseUri,"api/"+a.apiVersion),b)}function h(){return{entities:"entities",attributes:"attributes",files:"files",entityTypes:"entityTypes",attributeDefinitions:"attributeDefinitions",workspaces:"workspaces",users:"users",usersMe:"users/me",groups:"groups",derivedAttributeDefinitions:"derivedAttributeDefinitions",customFunctions:"customFunctions",tasks:"tasks",taskDefinitions:"taskDefinitions",expertises:"expertises",attributeValues:"values",events:"events",changesets:"changesets",comments:"comments",like:"like",jwt:"jwt"}}var i=h();return{getFullUrl:g,getRelativeUrl:e,generateHref:d,paths:i,isEntity:b(i.entities),isTask:b(i.tasks),isAttribute:b(i.attributes),isFile:b(i.files),isEntityType:b(i.entityTypes),isTaskDefinition:b(i.taskDefinitions),isAttributeDefinition:b(i.attributeDefinitions),isWorkspace:b(i.workspaces),isUser:b(i.users),isGroup:b(i.groups),isDerivedAttributeDefinition:b(i.derivedAttributeDefinitions),isCustomFunction:b(i.customFunctions)}}angular.module("sociocortex").service("scUtil",a)}();